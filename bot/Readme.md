# –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è Telegram-–±–æ—Ç–∞ –¥–ª—è –ø–æ–≥–æ–¥—ã –∏ –∫—É—Ä—Å–æ–≤ –≤–∞–ª—é—Ç

## –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –ø—Ä–µ–¥–º–µ—Ç–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏](#–∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ-–ø—Ä–µ–¥–º–µ—Ç–Ω–æ–π-–æ–±–ª–∞—Å—Ç–∏)  
2. [–¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Å–æ–∑–¥–∞–Ω–∏—é](#—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ-—Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ-–ø–æ-—Å–æ–∑–¥–∞–Ω–∏—é)  
   - [–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è](#–ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞-–æ–∫—Ä—É–∂–µ–Ω–∏—è)  
   - [–°–æ–∑–¥–∞–Ω–∏–µ Telegram-–±–æ—Ç–∞](#—Å–æ–∑–¥–∞–Ω–∏–µ-telegram-–±–æ—Ç–∞)  
   - [–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ API –ø–æ–≥–æ–¥—ã –∏ –≤–∞–ª—é—Ç](#–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ-api-–ø–æ–≥–æ–¥—ã-–∏-–≤–∞–ª—é—Ç)  
   - [–û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–º–∞–Ω–¥ –∏ —Å–æ–æ–±—â–µ–Ω–∏–π](#–æ–±—Ä–∞–±–æ—Ç–∫–∞-–∫–æ–º–∞–Ω–¥-–∏-—Å–æ–æ–±—â–µ–Ω–∏–π)  
3. [–ü—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞](#–ø—Ä–∏–º–µ—Ä—ã-–∫–æ–¥–∞)  
4. [–ò–ª–ª—é—Å—Ç—Ä–∞—Ü–∏–∏](#–∏–ª–ª—é—Å—Ç—Ä–∞—Ü–∏–∏)  
5. [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ Git-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è](#—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-git-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è)  

---

## –ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –ø—Ä–µ–¥–º–µ—Ç–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏

### –¶–µ–ª—å –ø—Ä–æ–µ–∫—Ç–∞  
–°–æ–∑–¥–∞—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ Telegram-–±–æ—Ç–∞

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã  
- **Telegram Bot API** ‚Äî –¥–ª—è –æ–±—â–µ–Ω–∏—è —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º —á–µ—Ä–µ–∑ —á–∞—Ç-–±–æ—Ç–∞.  
- **OpenWeatherMap API** ‚Äî –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –æ –ø–æ–≥–æ–¥–µ.  
- **ExchangeRate API** ‚Äî –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∫—É—Ä—Å–æ–≤ –≤–∞–ª—é—Ç.

### –û—Å–Ω–æ–≤–Ω—ã–µ –∑–∞–¥–∞—á–∏  
- –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –ø–æ–∫–∞–∑ –≥–ª–∞–≤–Ω–æ–≥–æ –º–µ–Ω—é.  
- –ó–∞–ø—Ä–æ—Å –≥–æ—Ä–æ–¥–∞ –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–æ–≥–æ–¥—ã –Ω–∞ —Å–µ–≥–æ–¥–Ω—è –∏–ª–∏ –Ω–∞ 5 –¥–Ω–µ–π.  
- –ü–æ–ª—É—á–µ–Ω–∏–µ –∫—É—Ä—Å–∞ –≤–∞–ª—é—Ç –ø–æ –∑–∞–ø—Ä–æ—Å—É.  
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞–∂–∞—Ç–∏–π –Ω–∞ –∫–Ω–æ–ø–∫–∏ –∏ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π.

---

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Å–æ–∑–¥–∞–Ω–∏—é

### –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Python  
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –∫–æ–º–∞–Ω–¥–æ–π:

```bash
pip install python-telegram-bot aiohttp
```
3. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å Telegram-–±–æ—Ç–∞ —É BotFather –∏ –ø–æ–ª—É—á–∏—Ç—å —Ç–æ–∫–µ–Ω.
4. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –Ω–∞ OpenWeatherMap –∏ ExchangeRate API –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∫–ª—é—á–µ–π.
   
### –°–æ–∑–¥–∞–Ω–∏–µ Telegram-–±–æ—Ç–∞

## –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–æ–∫–µ–Ω–æ–≤

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `bot.py` –∏ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –Ω—É–∂–Ω—ã–µ –º–æ–¥—É–ª–∏:

```python
from telegram import Update, InlineKeyboardButton, InlineKeyboardMarkup
from telegram.ext import (
    Application,
    CommandHandler,
    MessageHandler,
    ContextTypes,
    ConversationHandler,
    CallbackQueryHandler,
    filters
)
import aiohttp
import datetime
```
### –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ API –ø–æ–≥–æ–¥—ã –∏ –≤–∞–ª—é—Ç
–§—É–Ω–∫—Ü–∏–∏ –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ API
```python
async def fetch_weather(city: str) -> str:
    url = f"http://api.openweathermap.org/data/2.5/forecast?q={city}&appid={WEATHER_API_KEY}&units=metric&lang=ru"
    async with aiohttp.ClientSession() as session:
        async with session.get(url) as response:
            data = await response.json()
            # –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö
            return f"–ü–æ–≥–æ–¥–∞ –≤ –≥–æ—Ä–æ–¥–µ {city}: {data['list'][0]['weather'][0]['description']}, —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ {data['list'][0]['main']['temp']}¬∞C"
```
–ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ —Å–æ–∑–¥–∞–π—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∫—É—Ä—Å–∞ –≤–∞–ª—é—Ç.

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–º–∞–Ω–¥ –∏ —Å–æ–æ–±—â–µ–Ω–∏–π
–û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞–∂–∞—Ç–∏–π –Ω–∞ –∫–Ω–æ–ø–∫–∏
```pyhton
async def button_handler(update: Update, context: ContextTypes.DEFAULT_TYPE):
    query = update.callback_query
    await query.answer()
    if query.data == 'weather':
        await query.message.reply_text("–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –≥–æ—Ä–æ–¥–∞ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–≥–æ–¥—ã:")
        return ASK_CITY
    elif query.data == 'exchange':
        await query.message.reply_text("–í–≤–µ–¥–∏—Ç–µ –≤–∞–ª—é—Ç–Ω—É—é –ø–∞—Ä—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, USD/RUB):")
        return ASK_CITY
```

### –ü—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞
–ù–∞–≤–∏–≥–∞—Ü–∏–∏ –∫–Ω–æ–ø–æ–∫
```python
def main_menu():
    keyboard = [
        [InlineKeyboardButton("üå§ –ü–æ–≥–æ–¥–∞", callback_data='weather')],
        [InlineKeyboardButton("üí± –ö—É—Ä—Å –≤–∞–ª—é—Ç", callback_data='exchange')],
    ]
    return InlineKeyboardMarkup(keyboard)
```

–ö–æ–¥ –∑–∞–ø—É—Å–∫–∞
```python
def main():
    application = Application.builder().token("–≤–∞—à_—Ç–æ–∫–µ–Ω_—Ç–µ–ª–µ–≥—Ä–∞–º").build()

    conv_handler = ConversationHandler(
        entry_points=[CommandHandler("weather", weather_command)],
        states={ASK_CITY: [MessageHandler(filters.TEXT & ~filters.COMMAND, handle_city)]},
        fallbacks=[CommandHandler("cancel", cancel)],
    )

    application.add_handler(CommandHandler("start", start))
    application.add_handler(conv_handler)
    application.add_handler(CallbackQueryHandler(button_handler))
    application.add_handler(MessageHandler(filters.TEXT & ~filters.COMMAND, text_handler))

    application.run_polling()

if __name__ == '__main__':
    main()
```
### –ò–ª–ª—é—Å—Ç—Ä–∞—Ü–∏–∏
## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –±–æ—Ç–∞
<img src="img/architecture.png" alt="–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Telegram-–±–æ—Ç–∞" width="500"/>

## –õ–æ–≥–æ—Ç–∏–ø –±–æ—Ç–∞
<img src="img/1040237.png" alt="–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Telegram-–±–æ—Ç–∞" width="200"/>

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ Git-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
```plaintext
/
bot/
‚îú‚îÄ‚îÄ README.md            # –≠—Ç–æ –æ–ø–∏—Å–∞–Ω–∏–µ
‚îú‚îÄ‚îÄ bot.py               # –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–¥ –±–æ—Ç–∞
‚îú‚îÄ‚îÄ img/              # –ü–∞–ø–∫–∞ —Å –∏–ª–ª—é—Å—Ç—Ä–∞—Ü–∏—è–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ 1040237.png    #Logo
```

